<div class="content">
  <div class="container">
    <div class="row my-3 d-flex justify-content-space-around">
      <div class="col">
        <h2 class="fs-3 text-primary my-3">
          Encontre Voluntários Para Ajudar Com a Sua Causa
        </h2>
      </div>


      <div class="row">
        <section class="col d-flex flex-wrap">
          <div ngbDropdown>
            <button
              type="button"
              class="btn btn-light px-5"
              id="causes-dropdown"
              ngbDropdownToggle
            >
              Qualificações
            </button>
            <div
              ngbDropdownMenu
              aria-labelledby="causes-dropdown"
              class="dropdown-menu"
            >
              <button
                (click)="addQualificationToSearch(qualification)"
                ngbDropdownItem
                *ngFor="let qualification of qualifications"
              >
                {{ qualification.name }}
              </button>
            </div>
          </div>
          <div
            *ngIf="selectedQualifications?.length > 0"
            class="d-flex flex-column mt-1"
          >
            <div
              *ngFor="let qualification of selectedQualifications"
              class="d-flex flex-row mt-1"
            >
              <span class="me-2 w-50">{{ qualification.name }}</span>
              <span
                (click)="removeQualificationToSearch(qualification)"
                role="button"
                class="bi bi-x-circle text-danger ms-2"
                title="Excluir {{ qualification.name }}"
                style="cursor: pointer"
              ></span>
            </div>
          </div>

          <div class="w-auto mb-1">
            <div ngbDropdown>
              <button
                type="button"
                class="btn btn-light px-5"
                id="federative-units-dropdown"
                ngbDropdownToggle
              >
                Estados
              </button>
              <div
                ngbDropdownMenu
                aria-labelledby="federative-units-dropdown"
                class="dropdown-menu"
              >
                <button
                  (click)="addFederativeUnitToSearch(federativeUnit)"
                  ngbDropdownItem
                  *ngFor="let federativeUnit of federativeUnits"
                >
                  {{ federativeUnit.name }} ({{
                  federativeUnit.abbreviation
                  }})
                </button>
              </div>
            </div>
            <div
              *ngIf="selectedFederativeUnits?.length > 0"
              class="d-flex flex-column mt-1"
            >
              <div
                *ngFor="let federativeUnit of selectedFederativeUnits"
                class="d-flex flex-row mt-1"
              >
                  <span class="me-2 w-50"
                  >{{ federativeUnit.name }} ({{
                    federativeUnit.abbreviation
                    }})</span
                  >
                <span
                  (click)="removeFederativeUnit(federativeUnit)"
                  role="button"
                  class="bi bi-x-circle text-danger ms-2"
                  title="Excluir {{ federativeUnit.name }}"
                  style="cursor: pointer"
                ></span>
              </div>
            </div>
          </div>
        </section>
      </div>

      <div style="display: flex; justify-content: center" *ngIf="isLoading">
        <div class="loader"></div>
      </div>
      <section
        *ngFor="let candidate of candidates"
        class="card card-content1 col-xs-10 col-sm-8 col-lg-5 col-xl-3"
      >
        <div class="" *ngIf="!isLoading">
          <!--            <div class="image-content">-->
          <!--              <span class="overlay"></span>-->
          <!--              <div class="card-image">-->
          <!--                <img-->
          <!--                  [src]="convertBase64ToPhotoUrl(candidate.photo)"-->
          <!--                  alt="Foto do candidato {{ candidate.name }}"-->
          <!--                  class="card-img"-->
          <!--                />-->
          <!--              </div>-->
          <!--            </div>-->
          <div class="card-content row">
            <h2
              class="name col-10 text-truncate"
              title="{{ candidate.name }}"
            >
              {{ candidate.name }}
            </h2>
            <p
              class="description crop-text-5"
              title="{{ candidate.bio }}"
            >
              {{ candidate.bio }}
            </p>

            <!-- <div class="description2 text-center row">
            <div class="col text-truncate text-start">
              <i
                class="bi bi-calendar-week text-warning"
                title="{{
                  avaliableVolunteer.opportunityDate | date : 'dd/MM/yyyy'
                }}"
                ><span class="text-dark">
                  {{
                    avaliableVolunteer.opportunityDate | date : "dd/MM/yyyy"
                  }}</span
                >
              </i>
            </div>
          </div> -->
            <div class="description2 text-start row">
              <div class="col text-truncate text-start">
                <i
                  class="bi bi-geo-alt-fill text-danger"
                  title="{{ candidate.address.city }} - {{
                      candidate.address.state
                    }}"
                ><span class="text-dark"
                >{{ candidate.address.city }} -
                  {{ candidate.address.state }}</span
                >
                </i>
              </div>
            </div>
            <div class="description2 text-start row">
              <div class="col text-truncate text-start">
                <i
                  class="bi bi-bookmark-heart text-success"
                  title="Qualificações: {{ candidate.qualifications }}"
                ><span class="text-dark text-start">{{
                  candidate.qualifications
                  }}</span>
                </i>
              </div>
            </div>
            <div
              class="row text-center my-2"
              style="width: 104%; max-width: 104%"
            >
              <!--                <div class="col-6">-->
              <!--                  <button-->
              <!--                    class="btn btn-sm btn-outline-warning"-->
              <!--                    (click)="openXl(contentModal, candidate)"-->
              <!--                  >-->
              <!--                    Detalhes-->
              <!--                  </button>-->
              <!--                </div>-->
              <div class="col-6">
                <button class="btn btn-sm btn-primary" (click)="openInviteModal()">Convidar</button>
              </div>
            </div>
          </div>
        </div>

        <ng-template #inviteModal let-modal>
          <div class="modal-header">
            <h4 class="modal-title" id="modal-basic-title2">
              Convidar para vagas
            </h4>
            <button
              type="button"
              class="btn-close"
              aria-label="Close"
              (click)="modal.dismiss('Cross click')"
            ></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <form [formGroup]="whichOpportunityToInviteForm">

              </form>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-primary"
              (click)="inviteCandidate(modal)"
            >
              Convidar
            </button>
          </div>
        </ng-template>

      </section>

      <div *ngIf="hasNextPage" class="row d-flex justify-content-center mt-5">
        <div class="col col-md-2 d-flex justify-content-center">
          <button
            (click)="loadCandidates()"
            class="btn btn-outline-light text-primary"
          >
            Carregar mais
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
