<div class="content">
  <div class="container">
    <div class="">
      <h3>Convites Para Oportunidades</h3>
    </div>
    <div *ngIf="opportunityInvitations.length == 0" class="text-center">
      <p class="bold p-5">Você ainda não recebeu nenhum convite!</p>
    </div>

    <div *ngIf="opportunityInvitations.length > 0">
      <table class="table table-hover mt-3">
        <thead class="table-dark">
          <tr>
            <th scope="col">Nome do Evento</th>
            <th scope="col">Data</th>
            <th class="text-center">Status</th>
            <th scope="col" class="text-center">Detalhes</th>
            <th scope="col" class="text-center">Ações Rapidas</th>
          </tr>
        </thead>
        <tbody>
          <!-- <div  class="border"> -->
          <tr *ngFor="let opportunityInvitation of opportunityInvitations">
            <td>{{ opportunityInvitation?.opportunity?.name }}</td>
            <td>
              {{
                opportunityInvitation?.opportunity?.opportunityDate
                  | date : "shortDate"
              }}
            </td>
            <td class="text-center">
              {{ invitationStatus(opportunityInvitation) }}
            </td>
            <td class="text-center">
              <button
                class="btn"
                (click)="
                  openInviteDetails(opportunityInvitation, inviteDetailsModal)
                "
              >
                <i class="bi bi-file-earmark-text"></i>
              </button>
            </td>
            <td>
              <div class="d-flex justify-content-center">
                <div class="d-flex">
                  <button
                    class="btn btn-sm btn-danger"
                    title="Recusar convite"
                    [disabled]="
                      !opportunityInvitationPending(opportunityInvitation)
                    "
                  >
                    <i class="bi bi-x-circle"></i>
                  </button>
                  <div class="px-2"></div>
                  <button
                    class="btn btn-sm btn-success"
                    title="Aceitar convite"
                    [disabled]="
                      !opportunityInvitationPending(opportunityInvitation)
                    "
                  >
                    <i class="bi bi-check-circle"></i>
                  </button>
                </div>
              </div>
            </td>
          </tr>
          <!-- <div class="row">
                <div class="col col-sm-2" title="{{oportunityIssue.type}}">{{oportunityIssue.type}}</div>
                <div class="col col-sm-2 text-truncate" title="{{oportunityIssue.name}}">{{oportunityIssue.name}}</div>
                <div class="col col-sm-2" title="{{oportunityIssue.date}}">{{oportunityIssue.date}}</div>
                <div class="col col-sm-2" title="{{oportunityIssue.status}}">{{oportunityIssue.status}}</div>
                <div class="col col-sm-4">
                  <button class="btn btn-sm btn-danger" title="Avaliar como Improcedente"><i class="bi bi-x-circle"></i></button>
                  <button class="btn btn-sm btn-success" title="Avaliar como Procedente"><i class="bi bi-check-circle"></i></button>
                </div>
              </div> -->
          <!-- </div> -->
        </tbody>
      </table>
    </div>
  </div>

  <ng-template #inviteDetailsModal let-modal>
    <div class="modal-header container-special">
      <h4 class="modal-title container-special">
        <p>{{ currentOpportunityInvitation?.opportunity?.name }}</p>
      </h4>
      <button
        type="button"
        class="btn-close container-special btn-close-white"
        aria-label="Close"
        (click)="modal.dismiss('Cross click')"
      ></button>
    </div>
    <div class="modal-body container-special">
      <div class="row">
        <div class="col-4 d-flex aligns-items-center">
          <img
            [src]="
              imageService.convertBase64ToPhotoUrl(
                currentOpportunityInvitation?.opportunity?.photo
              )
            "
            class="w-100"
            alt="Imagem da oportunidade de voluntariado"
          />
        </div>
        <div class="col-8">
          <h5>Descrição da Oportunidade</h5>
          <p>{{ currentOpportunityInvitation?.opportunity?.description }}</p>

          <h5>Causas defendidas</h5>
          <ul
            *ngIf="
              currentOpportunityInvitation?.opportunity?.causes?.length > 0
            "
          >
            <li
              *ngFor="
                let cause of currentOpportunityInvitation?.opportunity?.causes
              "
            >
              {{ cause }}
            </li>
          </ul>
        </div>
      </div>
      <div class="row">
        <div class="col-8">
          <div class="row">
            <i class="bi bi-calendar-week text-warning col"
              ><span class="text-dark">
                {{
                  currentOpportunityInvitation?.opportunity?.opportunityDate
                    | date : "shortDate"
                }}</span
              >
            </i>
          </div>
          <div class="row">
            <i class="bi bi-geo-alt-fill text-danger col"
              ><span class="text-dark"
                >{{ currentOpportunityInvitation?.opportunity?.address.city }} -
                {{
                  currentOpportunityInvitation?.opportunity?.address.state
                }}</span
              >
            </i>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer container-special">
      <button
        type="button"
        ngbAutofocus
        class="btn btn-outline-danger container-special"
        (click)="denyInvite(currentOpportunityInvitation)"
        [disabled]="!opportunityInvitationPending(currentOpportunityInvitation)"
      >
        Recusar
      </button>
      <button
        type="button"
        ngbAutofocus
        class="btn btn-primary container-special"
        (click)="acceptInvite(currentOpportunityInvitation)"
        [disabled]="!opportunityInvitationPending(currentOpportunityInvitation)"
      >
        Aceitar
      </button>
    </div>
  </ng-template>

  <ng-template #content2 let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Detalhes</h4>
      <button
        type="button"
        class="btn-close"
        aria-label="Close"
        (click)="modal.dismiss('Cross click')"
      ></button>
    </div>
    <div class="modal-body">
      <!-- <form>
          <div class="mb-3">
            <label for="dateOfBirth">Date of birth</label>
            <div class="input-group">
              <input
                id="dateOfBirth"
                class="form-control"
                placeholder="yyyy-mm-dd"
                name="dp"
                ngbDatepicker
                #dp="ngbDatepicker"
              />
              <button class="btn btn-outline-secondary bi bi-calendar3" (click)="dp.toggle()" type="button"></button>
            </div>
          </div>
        </form> -->

      <!-- Info do problema -->
      <div class="mb-2 border p-2">
        <div class="row fw-bold">
          <div class="col">Id</div>
          <div class="col">Data do Registro</div>
        </div>
        <div class="row">
          <div class="col">2</div>
          <div class="col">25/02/22</div>
        </div>
      </div>

      <!-- Info da vaga -->
      <div class="mb-2 border p-2">
        <div class="row fw-bold">
          <div class="col">Nome da vaga</div>
          <div class="col">Tipo</div>
        </div>
        <div class="row">
          <div class="col">30/2022</div>
          <div class="col">Doação de Alimentos</div>
        </div>
      </div>

      <!-- Relato do problema -->
      <div class="mb-2 border p-2">
        <div class="row fw-bold">
          <div class="col">Relato</div>
        </div>
        <div class="row">
          <div class="col">Vaga não pertinente ao solicitado</div>
        </div>
      </div>

      <!-- Info do voluntário -->
      <div class="mt-2 border p-2">
        <div class="row fw-bold">
          <div class="col">Dados do Voluntário</div>
        </div>
        <div class="row">
          <div class="col">Nome: Anderson José</div>
        </div>
        <div class="row">
          <div class="col">Whats: 11 999999-9999</div>
        </div>
        <div class="row">
          <div class="col">Email: anderson123@gmail.com</div>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button
        type="button"
        class="btn btn-outline-dark"
        (click)="modal.close('Save click')"
      >
        Improcedente
      </button>
      <button
        type="button"
        class="btn btn-outline-dark"
        (click)="modal.close('Save click')"
      >
        Procedente
      </button>
    </div>
  </ng-template>
</div>
